(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();function C(){const t=document.getElementById("backToTopBtn");window.onscroll=function(){document.body.scrollTop>100||document.documentElement.scrollTop>100?t.style.display="block":t.style.display="none"},t.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})}const S="http://localhost:3000";async function q(){try{return await(await fetch(`${S}/favorites`)).json()}catch(t){return console.error("Error:",t),null}}async function L(t){try{const e=await fetch(`${S}/favorites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Error: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Post Data Error:",e),e}}async function T(t){try{const e=await fetch(`${S}/favorites/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Error: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Post Data Error:",e),e}}const m="https://api.tcgdex.net/v2/en";async function v(t){try{return await(await fetch(`${m}/sets/${t}`)).json()}catch(e){return console.error("Error:",e),null}}async function $(t){try{return await(await fetch(`${m}/cards/${t}`)).json()}catch(e){return console.error("Error:",e),null}}async function x(){try{return await(await fetch(`${m}/series`)).json()}catch(t){return console.error("Error:",t),null}}async function y(t){try{return await(await fetch(`${m}/series/${t}`)).json()}catch(e){return console.error("Error:",e),null}}async function I(){try{return await(await fetch(`${m}/sets`)).json()}catch(t){return console.error("Error:",t),null}}async function A(t="base1",e="",o="",c="",n=""){try{const r=`${m}/cards?id=like:${t}-&name=like:${e}&category=like:${o}&rarity=like:${c}&sort:field=${n}&sort:order=ASC`;return console.log(r),await(await fetch(r)).json()}catch(r){return console.error("Error:",r),null}}async function N(t){try{const e=`${m}/sets/${t}`;return(await(await fetch(e)).json()).cardCount.official}catch(e){return console.error("Error:",e),null}}async function k(t){try{const e=await N(t),o=new Set,c=e/2,n=[];for(let a=1;a<c;a++){let s=`https://api.tcgdex.net/v2/en/cards/${t}-${a}`;["a1","sv-01","sv-02","sv-03","sv03.5"].indexOf(t.toLowerCase())!=-1?s=`https://api.tcgdex.net/v2/en/cards/${t}-${a.toString().padStart(3,"0")}`:["smp","bwp"].indexOf(t.toLowerCase())!=-1&&(s=`https://api.tcgdex.net/v2/en/cards/${t}-SM${a.toString().padStart(2,"0")}`),n.push(s)}const r=await Promise.all(n.map(a=>fetch(a)));for(const a of r){if(!a.ok){console.warn(`Error en la URL ${a.url}: ${a.statusText}`);continue}const s=await a.json();s.rarity&&o.add(s.rarity)}return[...o]}catch(e){return console.error("Error en getRarities:",e),[]}}C();let p="base";document.addEventListener("DOMContentLoaded",t=>{u("sectionHero"),document.querySelectorAll(".changeToSectionHero").forEach(s=>s.addEventListener("click",d=>u("sectionHero"))),document.querySelectorAll(".changeToSectionCards").forEach(s=>s.addEventListener("click",d=>{h(),u("sectionCards")})),document.querySelectorAll(".changeToFavorites").forEach(s=>s.addEventListener("click",d=>{b()})),document.querySelectorAll(".changeToSectionSeries").forEach(s=>s.addEventListener("click",d=>{u("sectionSeriesRow")})),document.querySelectorAll(".changeToSectionSets").forEach(s=>s.addEventListener("click",d=>u("sectionSets"))),document.querySelectorAll(".dropdownSort .sortName").forEach(s=>{s.addEventListener("click",d=>{document.querySelector(".currentSortName").textContent=s.textContent,document.querySelector(".currentSortName").setAttribute("data-id",s.getAttribute("data-id")),h()})}),x().then(s=>{H(s),B(s)}).catch(s=>console.log("Error: "+s)),I().then(s=>{F(s)}).catch(s=>console.log("Error: "+s)),document.querySelector(".buttonSearchByName").addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),h()})});function B(t){const e=document.querySelector(".series-row");e.innerHTML="",t.forEach(o=>{const c=document.createElement("div");c.className="col-xl-3 col-md-4 col-sm-6 my-4",c.innerHTML=`
            <a href="#sectionSeriesRow" class="card seriesCard h-100" data-id="${o.id}">
                    <div class="card-img-top">
                        <img class="img-fluid" src="${o.logo}.webp" alt="${o.name}" onerror="this.src='img/no-logo.png';"/>
                    </div>
                    <div class="card-body">
                    <h4 class="card-title text-center">${o.name}</h4>
                </div>
            </a>`,c.querySelector("a").addEventListener("click",r=>{p=o.id,y(p).then(i=>{R(p),document.querySelector(".selectedSerie").textContent=i.name,document.querySelector(".currentSeries").src=i.logo+".webp",u("sectionSetIdRow"),E(i.id)}).catch(i=>console.log("Error: "+i))}),e.appendChild(c)}),f()}function F(t){const e=document.querySelector(".sets-row");e.innerHTML="",t.forEach(o=>{const c=document.createElement("div");c.className="col-xl-3 col-md-4 col-sm-6 my-4 setCard",c.innerHTML=`
                <a href="#sectionSets" class="card setsCard h-100" data-id="${o.id}">
                        <div class="card-img-top">
                            <img class="img-fluid" src="${o.logo}.webp" alt="${o.name}" onerror="this.src='img/no-logo.png';"/>
                        </div>
                        <div class="card-body">
                        <h4 class="card-title text-center">${o.name}</h4>
                    </div>
                </a>
            `;const n=c.querySelector("a"),r=n.getAttribute("data-id");n.addEventListener("click",i=>{u("sectionCards"),document.querySelector(".currentSeries").src="",document.querySelector(".currentSet").src=o.logo+".webp",document.querySelector(".currentSet").parentNode.setAttribute("data-id",o.id),v(r).then(a=>{g(a.cards),a.cards}).catch(a=>console.log("Error: "+a))}),e.appendChild(c)})}function R(t){const e=document.querySelector(".setsId-row");e.innerHTML="",y(t).then(o=>{o.sets.forEach(n=>{const r=document.createElement("div");r.className="col-xl-3 col-md-4 col-sm-6 my-4",r.innerHTML=`
                    <a href="#sectionSetIdRow" class="card setByIdCard h-100" data-id="${n.id}">
                            <div class="card-img-top">
                                <img class="img-fluid" src="${n.logo}.webp" alt="${n.name}" onerror="this.src='img/no-logo.png';"/>
                            </div>
                            <div class="card-body">
                            <h4 class="card-title text-center">${n.name}</h4>
                        </div>
                    </a>`;const i=r.querySelector("a"),a=i.getAttribute("data-id");i.addEventListener("click",s=>{u("sectionCards"),document.querySelector(".currentSet").src=n.logo+".webp",document.querySelector(".currentSet").parentNode.setAttribute("data-id",n.id),v(a).then(d=>{g(d.cards),d.cards}).catch(d=>console.log("Error: "+d))}),e.appendChild(r)}),u("sectionSetIdRow")}).catch(o=>console.log("Error: "+o))}function b(){q().then(t=>{g(t,!0),u("sectionCards"),O()}).catch(t=>console.log("Error: "+t))}function g(t,e=!1){const o=document.querySelector(".cardContainer .row");!t.length>0?o.innerHTML="<h2 class='errorFilters text-center display-4'>There are not cards that fit the filters</h2>":o.innerHTML="";const c=document.querySelector("#pokemonCardTemplate");t=t.filter(r=>r.image!=null),t.forEach(r=>{const i=c.cloneNode(!0).content,a=i.querySelector("img");a.src=`${r.image}/high.webp`,a.alt=r.id,i.querySelector(".starFavoriteButton").setAttribute("data-id",r.id),o.append(i)}),document.querySelectorAll(".starFavoriteButton").forEach(r=>{const i=document.getElementById("liveToastFav"),a=new bootstrap.Toast(i);r.addEventListener("click",s=>{const d=r.getAttribute("data-id");$(d).then(l=>{let w=l;document.querySelector(".toastIcon").src=l.image+"/high.webp",document.querySelector(".toastCardName").textContent=l.name,L(w)}).catch(l=>console.log("Error: "+l)),a.show()})}),P(e)}function H(t){const e=document.querySelector(".dropdownSeries"),o=e.querySelector("#dropdownItemTemplate");t.forEach(c=>{const n=o.cloneNode(!0).content,r=n.querySelector("img"),i=n.querySelector(".nameItem");r.src=`${c.logo}.webp`,r.alt=`${c.name}`,i.textContent=`${c.name}`;const a=document.querySelector(".dropdownSeriesContainer .currentSeries");document.querySelector(".dropdownSeriesContainer .currentSeriesName");const s=n.querySelector("a");s.setAttribute("data-id",c.id),s.addEventListener("click",d=>{p=c.id,y(p).then(l=>{a.src=l.logo+".webp",a.alt=`${l.name}`,document.querySelector(".currentSet").setAttribute("src","img/logo-placeholder.png"),document.querySelector(".currentRarityName").innerHTML='<img src="img/logo-placeholder.png" alt="" class="w-50">',E(p),f()}).catch(l=>console.log("Error: "+l))}),e.append(n)})}function E(t){const e=document.querySelector(".dropdownSets");e.innerHTML="";const o=document.querySelector("#dropdownItemTemplate");y(t).then(c=>{c.sets.forEach(r=>{const i=o.cloneNode(!0).content,a=i.querySelector("img"),s=i.querySelector(".nameItem");a.src=`${r.logo}.webp`,a.alt=`${r.name}`,s.textContent=`${r.name}`;const d=i.querySelector("a");d.setAttribute("data-id",r.id);const l=document.querySelector(".dropdownSetsContainer .currentSet");d.addEventListener("click",w=>{l.src=r.logo+".webp",l.alt=`${r.name}`,l.parentNode.setAttribute("data-id",r.id),document.querySelector(".currentRarityName").innerHTML='<img src="img/logo-placeholder.png" alt="" class="w-50">',M(r.id),h(),f()}),e.append(i)})}).catch(c=>console.log("Error: "+c))}function M(t){const e=document.querySelector(".dropdownRarity");e.innerHTML="";const o=document.querySelector("#dropdownItemRarityTemplate");k(t).then(c=>{c.forEach(n=>{const r=o.cloneNode(!0).content,i=r.querySelector(".rarityName");i.textContent=n;const a=r.querySelector("a"),s=document.querySelector(".currentRarityName");a.addEventListener("click",d=>{s.textContent=n,h()}),e.append(r)})}).catch(c=>console.log("Error: "+c))}function h(){let t=document.querySelector(".currentSet").parentNode.getAttribute("data-id"),e=document.querySelector(".inputSearchByName"),o=document.querySelector(".currentRarityName").textContent,c=document.querySelector(".currentSortName").getAttribute("data-id");t=t??void 0,A(t,e.value,"",o,c).then(n=>{g(n)}).catch(n=>console.log("Error: "+n))}function u(t){const e=document.querySelector("header");t=="sectionHero"?(e.classList.remove("d-block"),e.classList.add("d-none")):(e.classList.add("d-block"),e.classList.remove("d-none")),document.querySelectorAll(".pagina").forEach(n=>{n.classList.contains("d-block")&&n.classList.remove("d-block"),n.classList.add("d-none")});const c=document.querySelector(`#${t}`);c.classList.contains("d-none")&&c.classList.remove("d-none"),c.classList.add("d-block")}function O(){document.querySelectorAll(".starFavoriteButtonContainer").forEach(o=>{const c=o.querySelector(".starFavoriteButton").getAttribute("data-id");o.innerHTML=`<a class="deleteFavoriteButton" data-id=${c}>
                                <i class="fa-solid fa-trash deleteFavorite"></i>
                            </a>`}),document.querySelectorAll(".deleteFavoriteButton").forEach(o=>{const c=document.getElementById("liveToastFavDel"),n=new bootstrap.Toast(c);o.addEventListener("click",r=>{n.show();const i=o.getAttribute("data-id");T(i).then(a=>{console.log(`Card with id ${i} has benn deleted from favorites.`),document.querySelector(".toastIconDelete").src=a.image+"/high.webp",document.querySelector(".toastCardNameDelete").textContent=a.name,b()}).catch(a=>console.log("Error: "+a))})})}function P(t=!1){let e=document.querySelector("#navbar"),o=document.querySelector(".favoritesTitle");t?(e.classList.remove("d-block"),e.classList.add("d-none"),o.classList.remove("d-none"),o.classList.add("d-block")):(e.classList.remove("d-none"),e.classList.add("d-block"),o.classList.remove("d-block"),o.classList.add("d-none"))}function f(){document.querySelectorAll("img").forEach(e=>{let o=e.src;o.indexOf("/pop/np/logo.webp")!=-1?e.src="https://assets.tcgdex.net/en/pop/pop1/logo.webp":o.indexOf("/dp/dpp/logo.webp")!=-1?e.src="https://assets.tcgdex.net/en/dp/dp1/logo.webp":o.indexOf("/xy/xyp/logo.webp")!=-1?e.src="https://assets.tcgdex.net/en/xy/xy1/logo.webp":o.indexOf("/sm/smp/logo.webp")!=-1?e.src="https://assets.tcgdex.net/en/sm/sm1/logo.webp":o.indexOf("/swsh/swshp/logo.webp")!=-1&&(e.src="https://assets.tcgdex.net/en/swsh/swsh1/logo.webp")})}
